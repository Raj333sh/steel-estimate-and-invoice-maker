<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steel Material Estimation Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 32px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header p {
            color: #7f8c8d;
            font-size: 16px;
        }

        .input-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 22px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .item-container {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            background: #f8f9fa;
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .item-header h3 {
            color: #34495e;
            font-size: 18px;
        }

        .remove-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }

        .remove-btn:hover {
            background: #c0392b;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            font-weight: 500;
            color: #2c3e50;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .input-group select,
        .input-group input {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            transition: border 0.3s;
        }

        .input-group select:focus,
        .input-group input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .input-group select:disabled {
            background: #ecf0f1;
            cursor: not-allowed;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-add {
            background: #95a5a6;
            color: white;
        }

        .btn-add:hover {
            background: #7f8c8d;
        }

        .btn-generate {
            background: #3498db;
            color: white;
        }

        .btn-generate:hover {
            background: #2980b9;
        }

        .btn-print {
            background: #27ae60;
            color: white;
        }

        .btn-print:hover {
            background: #229954;
        }

        .btn-pdf {
            background: #9b59b6;
            color: white;
        }

        .btn-pdf:hover {
            background: #8e44ad;
        }

        .results-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: none;
        }

        .results-section.active {
            display: block;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .results-header h2 {
            color: #2c3e50;
            font-size: 26px;
        }

        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
            font-size: 14px;
        }

        th {
            background: #ecf0f1;
            font-weight: 600;
            color: #2c3e50;
        }

        tbody tr:hover {
            background: #f8f9fa;
        }

        tfoot {
            background: #e3f2fd;
            font-weight: 700;
        }

        tfoot td {
            color: #1976d2;
            font-size: 16px;
        }

        .footer-note {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            color: #7f8c8d;
            font-size: 14px;
        }

        .icon {
            display: inline-block;
            width: 20px;
            height: 20px;
        }

        @media print {
            body {
                background: white;
            }
            .input-section,
            .btn-print,
            .btn-pdf {
                display: none !important;
            }
            .results-section {
                box-shadow: none;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 24px;
            }
            .input-grid {
                grid-template-columns: 1fr;
            }
            .results-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>
                <span>üìê</span>
                Steel Material Estimation Calculator
            </h1>
            <p>Professional structural steel quantity and cost estimation tool</p>
        </div>

        <!-- Input Section -->
        <div class="input-section">
            <h2 class="section-title">Material Input</h2>
            <div id="items-container"></div>
            <div class="button-group">
                <button class="btn btn-add" onclick="addItem()">
                    <span>‚ûï</span> Add Another Item
                </button>
                <button class="btn btn-generate" onclick="generateEstimate()">
                    <span>üßÆ</span> Generate Estimate
                </button>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results-section" id="results-section">
            <div class="results-header">
                <h2>Estimation Results</h2>
                <div class="button-group">
                    <button class="btn btn-print" onclick="window.print()">
                        <span>üñ®Ô∏è</span> Print
                    </button>
                    <button class="btn btn-pdf" onclick="downloadPDF()">
                        <span>üìÑ</span> Download PDF
                    </button>
                </div>
            </div>
            <div class="table-container">
                <table id="results-table">
                    <thead>
                        <tr>
                            <th>S.No</th>
                            <th>Material Type</th>
                            <th>Section Size</th>
                            <th>Weight/m (kg)</th>
                            <th>Input Length</th>
                            <th>Input Width</th>
                            <th>Unit</th>
                            <th>Length (m)</th>
                            <th>Width (m)</th>
                            <th>Area (m¬≤)</th>
                            <th>Qty</th>
                            <th>Total Weight (kg)</th>
                            <th>Cost/kg (‚Çπ)</th>
                            <th>Total Cost (‚Çπ)</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody id="results-body"></tbody>
                    <tfoot id="results-footer"></tfoot>
                </table>
            </div>
            <div class="footer-note">
                <p><strong>Date:</strong> <span id="estimate-date"></span></p>
                <p style="margin-top: 10px;"><strong>Note:</strong> All weights are calculated as per IS standards. Actual weights may vary slightly.</p>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive Steel Database
        const steelDatabase = {
            "ISMB": {
                "100": { weight: 11.5, depth: 100, width: 75 },
                "125": { weight: 13.7, depth: 125, width: 75 },
                "150": { weight: 15.0, depth: 150, width: 80 },
                "175": { weight: 19.6, depth: 175, width: 90 },
                "200": { weight: 25.4, depth: 200, width: 100 },
                "225": { weight: 31.2, depth: 225, width: 110 },
                "250": { weight: 37.3, depth: 250, width: 125 },
                "300": { weight: 46.1, depth: 300, width: 140 },
                "350": { weight: 52.4, depth: 350, width: 140 },
                "400": { weight: 61.6, depth: 400, width: 140 },
                "450": { weight: 72.4, depth: 450, width: 150 },
                "500": { weight: 86.9, depth: 500, width: 180 },
                "550": { weight: 101.8, depth: 550, width: 190 },
                "600": { weight: 122.6, depth: 600, width: 210 }
            },
            "ISMC": {
                "75": { weight: 7.14, depth: 75, width: 40 },
                "100": { weight: 9.56, depth: 100, width: 50 },
                "125": { weight: 13.1, depth: 125, width: 65 },
                "150": { weight: 16.8, depth: 150, width: 75 },
                "175": { weight: 19.6, depth: 175, width: 75 },
                "200": { weight: 22.3, depth: 200, width: 75 },
                "225": { weight: 26.1, depth: 225, width: 80 },
                "250": { weight: 31.1, depth: 250, width: 80 },
                "300": { weight: 36.3, depth: 300, width: 90 },
                "350": { weight: 41.8, depth: 350, width: 100 },
                "400": { weight: 50.1, depth: 400, width: 100 }
            },
            "ISA Equal": {
                "20x20x3": { weight: 0.88 },
                "25x25x3": { weight: 1.11 },
                "25x25x5": { weight: 1.77 },
                "30x30x3": { weight: 1.36 },
                "30x30x5": { weight: 2.18 },
                "40x40x3": { weight: 1.84 },
                "40x40x5": { weight: 2.97 },
                "40x40x6": { weight: 3.52 },
                "45x45x5": { weight: 3.38 },
                "50x50x5": { weight: 3.77 },
                "50x50x6": { weight: 4.47 },
                "60x60x5": { weight: 4.57 },
                "60x60x6": { weight: 5.42 },
                "60x60x8": { weight: 7.09 },
                "65x65x6": { weight: 5.91 },
                "70x70x6": { weight: 6.38 },
                "75x75x6": { weight: 6.85 },
                "75x75x8": { weight: 8.99 },
                "80x80x6": { weight: 7.34 },
                "90x90x6": { weight: 8.28 },
                "90x90x8": { weight: 10.9 },
                "100x100x6": { weight: 9.18 },
                "100x100x8": { weight: 12.1 },
                "100x100x10": { weight: 15.1 },
                "110x110x8": { weight: 13.4 },
                "120x120x8": { weight: 14.7 },
                "130x130x10": { weight: 19.7 },
                "150x150x10": { weight: 22.9 },
                "150x150x12": { weight: 27.3 },
                "200x200x15": { weight: 45.0 }
            },
            "ISA Unequal": {
                "30x20x3": { weight: 1.11 },
                "40x25x3": { weight: 1.48 },
                "50x30x5": { weight: 2.97 },
                "60x40x5": { weight: 3.73 },
                "60x40x6": { weight: 4.43 },
                "65x50x5": { weight: 4.30 },
                "75x50x6": { weight: 5.60 },
                "75x50x8": { weight: 7.30 },
                "80x60x6": { weight: 6.31 },
                "90x60x6": { weight: 6.77 },
                "100x65x7": { weight: 8.77 },
                "100x75x8": { weight: 10.6 },
                "110x70x8": { weight: 10.9 },
                "125x75x8": { weight: 12.2 },
                "125x95x8": { weight: 13.4 },
                "150x115x10": { weight: 20.3 },
                "200x150x15": { weight: 40.1 }
            },
            "MS Flat": {
                "20x3": { weight: 0.47 },
                "20x5": { weight: 0.79 },
                "20x6": { weight: 0.94 },
                "25x3": { weight: 0.59 },
                "25x5": { weight: 0.98 },
                "25x6": { weight: 1.18 },
                "32x3": { weight: 0.75 },
                "32x6": { weight: 1.51 },
                "40x5": { weight: 1.57 },
                "40x6": { weight: 1.88 },
                "50x5": { weight: 1.96 },
                "50x6": { weight: 2.36 },
                "50x8": { weight: 3.14 },
                "50x10": { weight: 3.93 },
                "65x6": { weight: 3.06 },
                "65x8": { weight: 4.08 },
                "75x6": { weight: 3.53 },
                "75x8": { weight: 4.71 },
                "75x10": { weight: 5.89 },
                "100x6": { weight: 4.71 },
                "100x8": { weight: 6.28 },
                "100x10": { weight: 7.85 },
                "100x12": { weight: 9.42 },
                "125x10": { weight: 9.81 },
                "150x10": { weight: 11.8 },
                "150x12": { weight: 14.1 }
            },
            "Round Bar": {
                "6": { weight: 0.222 },
                "8": { weight: 0.395 },
                "10": { weight: 0.617 },
                "12": { weight: 0.888 },
                "16": { weight: 1.578 },
                "20": { weight: 2.466 },
                "25": { weight: 3.853 },
                "32": { weight: 6.313 },
                "40": { weight: 9.864 },
                "50": { weight: 15.41 },
                "60": { weight: 22.19 },
                "75": { weight: 34.68 },
                "100": { weight: 61.65 }
            },
            "MS Plate": {
                "6mm": { weight: 47.1, thickness: 6, density: 7850 },
                "8mm": { weight: 62.8, thickness: 8, density: 7850 },
                "10mm": { weight: 78.5, thickness: 10, density: 7850 },
                "12mm": { weight: 94.2, thickness: 12, density: 7850 },
                "16mm": { weight: 125.6, thickness: 16, density: 7850 },
                "20mm": { weight: 157, thickness: 20, density: 7850 },
                "25mm": { weight: 196.25, thickness: 25, density: 7850 },
                "32mm": { weight: 251.2, thickness: 32, density: 7850 },
                "40mm": { weight: 314, thickness: 40, density: 7850 },
                "50mm": { weight: 392.5, thickness: 50, density: 7850 }
            },
            "RHS": {
                "40x20x2": { weight: 1.42 },
                "50x25x2": { weight: 1.78 },
                "60x40x3": { weight: 3.63 },
                "80x40x3": { weight: 4.32 },
                "100x50x3": { weight: 5.36 },
                "120x60x4": { weight: 8.59 },
                "150x100x5": { weight: 14.8 },
                "200x100x6": { weight: 21.3 }
            },
            "SHS": {
                "25x25x2": { weight: 1.12 },
                "40x40x2": { weight: 1.84 },
                "50x50x3": { weight: 3.44 },
                "60x60x3": { weight: 4.19 },
                "80x80x4": { weight: 7.44 },
                "100x100x5": { weight: 11.6 },
                "120x120x6": { weight: 16.7 },
                "150x150x6": { weight: 21.2 }
            },
            "CHS": {
                "21.3x2.3": { weight: 1.12 },
                "26.9x2.3": { weight: 1.44 },
                "33.7x2.6": { weight: 2.09 },
                "42.4x2.6": { weight: 2.69 },
                "48.3x2.9": { weight: 3.44 },
                "60.3x2.9": { weight: 4.37 },
                "76.1x3.2": { weight: 6.09 },
                "88.9x3.2": { weight: 7.13 },
                "114.3x4.0": { weight: 11.4 },
                "139.7x4.5": { weight: 15.9 },
                "168.3x4.5": { weight: 19.3 }
            },
            "MS Chequered Plate": {
                "5mm": { weight: 42.5, thickness: 5, density: 7850 },
                "6mm": { weight: 51.0, thickness: 6, density: 7850 },
                "8mm": { weight: 68.0, thickness: 8, density: 7850 },
                "10mm": { weight: 85.0, thickness: 10, density: 7850 },
                "12mm": { weight: 102.0, thickness: 12, density: 7850 },
                "16mm": { weight: 136.0, thickness: 16, density: 7850 },
                "20mm": { weight: 170.0, thickness: 20, density: 7850 }
            },
            "MS Sheet": {
                "0.5mm": { weight: 3.93, thickness: 0.5, density: 7850 },
                "0.63mm": { weight: 4.95, thickness: 0.63, density: 7850 },
                "0.71mm": { weight: 5.57, thickness: 0.71, density: 7850 },
                "0.8mm": { weight: 6.28, thickness: 0.8, density: 7850 },
                "0.9mm": { weight: 7.07, thickness: 0.9, density: 7850 },
                "1.0mm": { weight: 7.85, thickness: 1.0, density: 7850 },
                "1.2mm": { weight: 9.42, thickness: 1.2, density: 7850 },
                "1.6mm": { weight: 12.56, thickness: 1.6, density: 7850 },
                "2.0mm": { weight: 15.7, thickness: 2.0, density: 7850 },
                "2.5mm": { weight: 19.63, thickness: 2.5, density: 7850 },
                "3.0mm": { weight: 23.55, thickness: 3.0, density: 7850 },
                "3.15mm": { weight: 24.73, thickness: 3.15, density: 7850 },
                "4.0mm": { weight: 31.4, thickness: 4.0, density: 7850 },
                "5.0mm": { weight: 39.25, thickness: 5.0, density: 7850 }
            },
            "MS Galvanized Sheet": {
                "0.5mm": { weight: 4.15, thickness: 0.5, density: 8300 },
                "0.63mm": { weight: 5.23, thickness: 0.63, density: 8300 },
                "0.71mm": { weight: 5.89, thickness: 0.71, density: 8300 },
                "0.8mm": { weight: 6.64, thickness: 0.8, density: 8300 },
                "0.9mm": { weight: 7.47, thickness: 0.9, density: 8300 },
                "1.0mm": { weight: 8.3, thickness: 1.0, density: 8300 },
                "1.2mm": { weight: 9.96, thickness: 1.2, density: 8300 },
                "1.6mm": { weight: 13.28, thickness: 1.6, density: 8300 },
                "2.0mm": { weight: 16.6, thickness: 2.0, density: 8300 },
                "2.5mm": { weight: 20.75, thickness: 2.5, density: 8300 },
                "3.0mm": { weight: 24.9, thickness: 3.0, density: 8300 }
            },
            "MS TMT Bar": {
                "6": { weight: 0.222 },
                "8": { weight: 0.395 },
                "10": { weight: 0.617 },
                "12": { weight: 0.888 },
                "16": { weight: 1.578 },
                "20": { weight: 2.466 },
                "25": { weight: 3.853 },
                "28": { weight: 4.83 },
                "32": { weight: 6.313 },
                "36": { weight: 8.00 },
                "40": { weight: 9.864 }
            },
            "MS Square Bar": {
                "10": { weight: 0.785 },
                "12": { weight: 1.13 },
                "16": { weight: 2.01 },
                "20": { weight: 3.14 },
                "25": { weight: 4.91 },
                "32": { weight: 8.04 },
                "40": { weight: 12.6 },
                "50": { weight: 19.6 },
                "60": { weight: 28.3 },
                "75": { weight: 44.2 },
                "100": { weight: 78.5 }
            },
            "SS Sheet 304": {
                "0.5mm": { weight: 4.0, thickness: 0.5, density: 8000 },
                "0.7mm": { weight: 5.6, thickness: 0.7, density: 8000 },
                "0.8mm": { weight: 6.4, thickness: 0.8, density: 8000 },
                "1.0mm": { weight: 8.0, thickness: 1.0, density: 8000 },
                "1.2mm": { weight: 9.6, thickness: 1.2, density: 8000 },
                "1.5mm": { weight: 12.0, thickness: 1.5, density: 8000 },
                "2.0mm": { weight: 16.0, thickness: 2.0, density: 8000 },
                "2.5mm": { weight: 20.0, thickness: 2.5, density: 8000 },
                "3.0mm": { weight: 24.0, thickness: 3.0, density: 8000 },
                "4.0mm": { weight: 32.0, thickness: 4.0, density: 8000 },
                "5.0mm": { weight: 40.0, thickness: 5.0, density: 8000 }
            },
            "SS Sheet 316": {
                "0.5mm": { weight: 4.0, thickness: 0.5, density: 8000 },
                "0.7mm": { weight: 5.6, thickness: 0.7, density: 8000 },
                "0.8mm": { weight: 6.4, thickness: 0.8, density: 8000 },
                "1.0mm": { weight: 8.0, thickness: 1.0, density: 8000 },
                "1.2mm": { weight: 9.6, thickness: 1.2, density: 8000 },
                "1.5mm": { weight: 12.0, thickness: 1.5, density: 8000 },
                "2.0mm": { weight: 16.0, thickness: 2.0, density: 8000 },
                "2.5mm": { weight: 20.0, thickness: 2.5, density: 8000 },
                "3.0mm": { weight: 24.0, thickness: 3.0, density: 8000 },
                "4.0mm": { weight: 32.0, thickness: 4.0, density: 8000 },
                "5.0mm": { weight: 40.0, thickness: 5.0, density: 8000 }
            },
            "SS Plate 304": {
                "6mm": { weight: 48.0, thickness: 6, density: 8000 },
                "8mm": { weight: 64.0, thickness: 8, density: 8000 },
                "10mm": { weight: 80.0, thickness: 10, density: 8000 },
                "12mm": { weight: 96.0, thickness: 12, density: 8000 },
                "16mm": { weight: 128.0, thickness: 16, density: 8000 },
                "20mm": { weight: 160.0, thickness: 20, density: 8000 },
                "25mm": { weight: 200.0, thickness: 25, density: 8000 },
                "32mm": { weight: 256.0, thickness: 32, density: 8000 },
                "40mm": { weight: 320.0, thickness: 40, density: 8000 },
                "50mm": { weight: 400.0, thickness: 50, density: 8000 }
            },
            "SS Plate 316": {
                "6mm": { weight: 48.0, thickness: 6, density: 8000 },
                "8mm": { weight: 64.0, thickness: 8, density: 8000 },
                "10mm": { weight: 80.0, thickness: 10, density: 8000 },
                "12mm": { weight: 96.0, thickness: 12, density: 8000 },
                "16mm": { weight: 128.0, thickness: 16, density: 8000 },
                "20mm": { weight: 160.0, thickness: 20, density: 8000 },
                "25mm": { weight: 200.0, thickness: 25, density: 8000 },
                "32mm": { weight: 256.0, thickness: 32, density: 8000 },
                "40mm": { weight: 320.0, thickness: 40, density: 8000 },
                "50mm": { weight: 400.0, thickness: 50, density: 8000 }
            },
            "SS CHS 304": {
                "21.3x2.0": { weight: 1.02 },
                "26.9x2.0": { weight: 1.32 },
                "33.7x2.3": { weight: 1.92 },
                "42.4x2.3": { weight: 2.45 },
                "48.3x2.6": { weight: 3.15 },
                "60.3x2.6": { weight: 3.98 },
                "76.1x2.9": { weight: 5.60 },
                "88.9x3.0": { weight: 6.78 },
                "114.3x3.6": { weight: 10.5 },
                "139.7x4.0": { weight: 14.3 },
                "168.3x4.5": { weight: 19.5 }
            },
            "SS RHS 304": {
                "40x20x2": { weight: 1.46 },
                "50x25x2": { weight: 1.83 },
                "60x40x3": { weight: 3.73 },
                "80x40x3": { weight: 4.44 },
                "100x50x3": { weight: 5.51 },
                "120x60x4": { weight: 8.83 },
                "150x100x5": { weight: 15.2 },
                "200x100x6": { weight: 21.9 }
            },
            "SS SHS 304": {
                "25x25x2": { weight: 1.15 },
                "40x40x2": { weight: 1.89 },
                "50x50x3": { weight: 3.54 },
                "60x60x3": { weight: 4.31 },
                "80x80x4": { weight: 7.65 },
                "100x100x5": { weight: 11.9 },
                "120x120x6": { weight: 17.2 },
                "150x150x6": { weight: 21.8 }
            },
            "SS Round Bar 304": {
                "6": { weight: 0.227 },
                "8": { weight: 0.403 },
                "10": { weight: 0.630 },
                "12": { weight: 0.906 },
                "16": { weight: 1.610 },
                "20": { weight: 2.516 },
                "25": { weight: 3.931 },
                "28": { weight: 4.930 },
                "32": { weight: 6.441 },
                "36": { weight: 8.165 },
                "40": { weight: 10.05 },
                "50": { weight: 15.71 },
                "60": { weight: 22.62 },
                "75": { weight: 35.34 },
                "100": { weight: 62.83 }
            },
            "SS Flat 304": {
                "20x3": { weight: 0.48 },
                "25x3": { weight: 0.60 },
                "25x5": { weight: 1.00 },
                "32x6": { weight: 1.54 },
                "40x5": { weight: 1.60 },
                "40x6": { weight: 1.92 },
                "50x5": { weight: 2.00 },
                "50x6": { weight: 2.40 },
                "50x8": { weight: 3.20 },
                "50x10": { weight: 4.00 },
                "65x6": { weight: 3.12 },
                "75x6": { weight: 3.60 },
                "75x8": { weight: 4.80 },
                "100x6": { weight: 4.80 },
                "100x8": { weight: 6.40 },
                "100x10": { weight: 8.00 },
                "100x12": { weight: 9.60 }
            },
            "SS ISA Equal 304": {
                "25x25x3": { weight: 1.13 },
                "30x30x3": { weight: 1.39 },
                "40x40x5": { weight: 3.03 },
                "50x50x5": { weight: 3.85 },
                "50x50x6": { weight: 4.56 },
                "60x60x6": { weight: 5.53 },
                "65x65x6": { weight: 6.03 },
                "75x75x6": { weight: 6.98 },
                "75x75x8": { weight: 9.17 },
                "90x90x8": { weight: 11.1 },
                "100x100x8": { weight: 12.3 },
                "100x100x10": { weight: 15.4 },
                "125x125x10": { weight: 19.5 },
                "150x150x12": { weight: 27.8 }
            },
            "SS ISA Unequal 304": {
                "50x30x5": { weight: 3.03 },
                "60x40x6": { weight: 4.52 },
                "75x50x6": { weight: 5.71 },
                "80x60x6": { weight: 6.44 },
                "100x65x7": { weight: 8.94 },
                "100x75x8": { weight: 10.8 },
                "125x75x8": { weight: 12.4 },
                "150x100x10": { weight: 19.3 },
                "200x150x15": { weight: 40.9 }
            },
            "SS ISMC 304": {
                "75": { weight: 7.28 },
                "100": { weight: 9.75 },
                "125": { weight: 13.4 },
                "150": { weight: 17.1 },
                "175": { weight: 20.0 },
                "200": { weight: 22.8 },
                "250": { weight: 31.7 },
                "300": { weight: 37.0 },
                "400": { weight: 51.1 }
            },
            "SS ISLC 304": {
                "100": { weight: 8.25 },
                "125": { weight: 11.2 },
                "150": { weight: 14.5 },
                "175": { weight: 17.9 },
                "200": { weight: 21.7 },
                "250": { weight: 28.8 },
                "300": { weight: 36.2 },
                "400": { weight: 50.5 }
            },
            "SS ISJC 304": {
                "100": { weight: 7.98 },
                "150": { weight: 13.8 },
                "200": { weight: 20.6 },
                "250": { weight: 28.5 },
                "300": { weight: 37.1 },
                "400": { weight: 56.2 }
            },
            "SS ISHB 304": {
                "150": { weight: 15.3 },
                "200": { weight: 25.9 },
                "225": { weight: 31.8 },
                "250": { weight: 38.0 },
                "300": { weight: 47.0 },
                "350": { weight: 53.4 },
                "450": { weight: 73.8 }
            },
            "SS ISWB 304": {
                "150": { weight: 18.3 },
                "175": { weight: 23.8 },
                "200": { weight: 30.6 },
                "225": { weight: 37.3 },
                "250": { weight: 44.2 },
                "300": { weight: 58.8 },
                "350": { weight: 71.7 },
                "400": { weight: 86.7 },
                "450": { weight: 104.0 },
                "500": { weight: 122.0 },
                "600": { weight: 160.0 }
            },
            "SS ISMB 304": {
                "100": { weight: 11.7 },
                "125": { weight: 14.0 },
                "150": { weight: 15.3 },
                "175": { weight: 20.0 },
                "200": { weight: 25.9 },
                "225": { weight: 31.8 },
                "250": { weight: 38.0 },
                "300": { weight: 47.0 },
                "350": { weight: 53.4 },
                "400": { weight: 62.8 },
                "450": { weight: 73.8 },
                "500": { weight: 88.6 },
                "550": { weight: 104.0 },
                "600": { weight: 125.0 }
            },
            "SS ISLB 304": {
                "100": { weight: 9.45 },
                "125": { weight: 11.9 },
                "150": { weight: 14.2 },
                "175": { weight: 16.8 },
                "200": { weight: 21.6 },
                "225": { weight: 26.3 },
                "250": { weight: 30.6 },
                "300": { weight: 37.7 },
                "350": { weight: 44.7 },
                "400": { weight: 52.2 },
                "450": { weight: 61.5 },
                "500": { weight: 75.0 },
                "550": { weight: 87.0 },
                "600": { weight: 104.0 }
            },
            "SS ISJB 304": {
                "150": { weight: 17.5 },
                "175": { weight: 22.8 },
                "200": { weight: 29.3 },
                "225": { weight: 35.7 },
                "250": { weight: 42.3 },
                "300": { weight: 56.2 },
                "350": { weight: 68.5 },
                "400": { weight: 82.9 },
                "450": { weight: 99.5 },
                "500": { weight: 116.6 },
                "600": { weight: 153.0 }
            }
        };

        let items = [];
        let itemCounter = 0;

        // Initialize first item
        function init() {
            addItem();
        }

        // Add new item
        function addItem() {
            itemCounter++;
            const itemId = itemCounter;
            
            items.push({
                id: itemId,
                materialType: '',
                sectionSize: '',
                length: '',
                width: '',
                lengthUnit: 'meter',
                quantity: '',
                costPerKg: '',
                notes: ''
            });

            renderItems();
        }

        // Remove item
        function removeItem(id) {
            if (items.length > 1) {
                items = items.filter(item => item.id !== id);
                renderItems();
            }
        }

        // Update item field
        function updateItem(id, field, value) {
            const item = items.find(item => item.id === id);
            if (item) {
                item[field] = value;
                if (field === 'materialType') {
                    item.sectionSize = '';
                    renderItems();
                }
            }
        }

        // Render all items
        function renderItems() {
            const container = document.getElementById('items-container');
            container.innerHTML = '';

            items.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'item-container';
                itemDiv.innerHTML = `
                    <div class="item-header">
                        <h3>Item ${index + 1}</h3>
                        ${items.length > 1 ? `<button class="remove-btn" onclick="removeItem(${item.id})">üóëÔ∏è Remove</button>` : ''}
                    </div>
                    <div class="input-grid">
                        <div class="input-group">
                            <label>Material Type *</label>
                            <select onchange="updateItem(${item.id}, 'materialType', this.value)">
                                <option value="">Select Material</option>
                                ${Object.keys(steelDatabase).map(type => 
                                    `<option value="${type}" ${item.materialType === type ? 'selected' : ''}>${type}</option>`
                                ).join('')}
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Section Size *</label>
                            <select onchange="updateItem(${item.id}, 'sectionSize', this.value)" ${!item.materialType ? 'disabled' : ''}>
                                <option value="">Select Size</option>
                                ${item.materialType ? Object.keys(steelDatabase[item.materialType]).map(size =>
                                    `<option value="${size}" ${item.sectionSize === size ? 'selected' : ''}>${size}</option>`
                                ).join('') : ''}
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Length *</label>
                            <input type="number" step="0.01" placeholder="e.g., 6.00" value="${item.length}" 
                                   oninput="updateItem(${item.id}, 'length', this.value)">
                        </div>
                        ${['MS Plate', 'MS Chequered Plate', 'MS Sheet', 'MS Galvanized Sheet', 'SS Sheet 304', 'SS Sheet 316', 'SS Plate 304', 'SS Plate 316'].includes(item.materialType) ? `
                        <div class="input-group">
                            <label>Width *</label>
                            <input type="number" step="0.01" placeholder="e.g., 4.00" value="${item.width}" 
                                   oninput="updateItem(${item.id}, 'width', this.value)">
                        </div>
                        ` : ''}
                        <div class="input-group">
                            <label>Length Unit *</label>
                            <select onchange="updateItem(${item.id}, 'lengthUnit', this.value)">
                                <option value="meter" ${item.lengthUnit === 'meter' ? 'selected' : ''}>Meter (m)</option>
                                <option value="mm" ${item.lengthUnit === 'mm' ? 'selected' : ''}>Millimeter (mm)</option>
                                <option value="feet" ${item.lengthUnit === 'feet' ? 'selected' : ''}>Feet (ft)</option>
                                <option value="inch" ${item.lengthUnit === 'inch' ? 'selected' : ''}>Inch (in)</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Quantity *</label>
                            <input type="number" placeholder="e.g., 10" value="${item.quantity}" 
                                   oninput="updateItem(${item.id}, 'quantity', this.value)">
                        </div>
                        <div class="input-group">
                            <label>Cost per kg (‚Çπ)</label>
                            <input type="number" step="0.01" placeholder="e.g., 65.00" value="${item.costPerKg}" 
                                   oninput="updateItem(${item.id}, 'costPerKg', this.value)">
                        </div>
                        <div class="input-group">
                            <label>Notes</label>
                            <input type="text" placeholder="Optional notes" value="${item.notes}" 
                                   oninput="updateItem(${item.id}, 'notes', this.value)">
                        </div>
                    </div>
                `;
                container.appendChild(itemDiv);
            });
        }

        // Generate estimate
        function generateEstimate() {
            const calculations = [];
            let hasError = false;

            items.forEach(item => {
                // Check if material requires width (all sheet/plate materials)
                const sheetPlateTypes = ['MS Plate', 'MS Chequered Plate', 'MS Sheet', 'MS Galvanized Sheet', 
                                         'SS Sheet 304', 'SS Sheet 316', 'SS Plate 304', 'SS Plate 316'];
                
                if (sheetPlateTypes.includes(item.materialType)) {
                    if (!item.materialType || !item.sectionSize || !item.length || !item.width || !item.quantity) {
                        hasError = true;
                        return;
                    }
                } else {
                    if (!item.materialType || !item.sectionSize || !item.length || !item.quantity) {
                        hasError = true;
                        return;
                    }
                }

                const sectionData = steelDatabase[item.materialType][item.sectionSize];
                
                let totalWeight = 0;
                let lengthInMeters = 0;
                let widthInMeters = 0;
                let areaInSqMeters = 0;
                
                if (sheetPlateTypes.includes(item.materialType)) {
                    // For Sheet/Plate materials: Weight = Length √ó Width √ó Thickness √ó Density
                    lengthInMeters = parseFloat(item.length);
                    widthInMeters = parseFloat(item.width);
                    
                    switch(item.lengthUnit) {
                        case 'mm':
                            lengthInMeters = lengthInMeters / 1000;
                            widthInMeters = widthInMeters / 1000;
                            break;
                        case 'feet':
                            lengthInMeters = lengthInMeters * 0.3048;
                            widthInMeters = widthInMeters * 0.3048;
                            break;
                        case 'inch':
                            lengthInMeters = lengthInMeters * 0.0254;
                            widthInMeters = widthInMeters * 0.0254;
                            break;
                        case 'meter':
                        default:
                            break;
                    }
                    
                    areaInSqMeters = lengthInMeters * widthInMeters;
                    const thicknessInMeters = sectionData.thickness / 1000;
                    const density = sectionData.density;
                    const volumeInCubicMeters = areaInSqMeters * thicknessInMeters;
                    totalWeight = volumeInCubicMeters * density * parseInt(item.quantity);
                    
                } else {
                    // For other materials: Weight = Weight/m √ó Length √ó Quantity
                    const weightPerMeter = sectionData.weight;
                    
                    lengthInMeters = parseFloat(item.length);
                    switch(item.lengthUnit) {
                        case 'mm':
                            lengthInMeters = lengthInMeters / 1000;
                            break;
                        case 'feet':
                            lengthInMeters = lengthInMeters * 0.3048;
                            break;
                        case 'inch':
                            lengthInMeters = lengthInMeters * 0.0254;
                            break;
                        case 'meter':
                        default:
                            break;
                    }
                    
                    totalWeight = weightPerMeter * lengthInMeters * parseInt(item.quantity);
                }
                
                const totalCost = item.costPerKg ? totalWeight * parseFloat(item.costPerKg) : 0;

                calculations.push({
                    ...item,
                    weightPerMeter: sectionData.weight,
                    lengthInMeters: lengthInMeters.toFixed(3),
                    widthInMeters: sheetPlateTypes.includes(item.materialType) ? widthInMeters.toFixed(3) : null,
                    areaInSqMeters: sheetPlateTypes.includes(item.materialType) ? areaInSqMeters.toFixed(3) : null,
                    totalWeight: totalWeight.toFixed(2),
                    totalCost: totalCost.toFixed(2)
                });
            });

            if (hasError) {
                alert('Please fill all required fields (marked with *) for all items.');
                return;
            }

            if (calculations.length === 0) {
                alert('Please add at least one item.');
                return;
            }

            displayResults(calculations);
        }

        // Display results
        function displayResults(calculations) {
            const tbody = document.getElementById('results-body');
            const tfoot = document.getElementById('results-footer');
            
            tbody.innerHTML = '';
            
            let grandTotalWeight = 0;
            let grandTotalCost = 0;

            calculations.forEach((item, index) => {
                grandTotalWeight += parseFloat(item.totalWeight);
                grandTotalCost += parseFloat(item.totalCost);
                
                // Get unit label
                const unitLabels = {
                    'meter': 'm',
                    'mm': 'mm',
                    'feet': 'ft',
                    'inch': 'in'
                };
                
                // Check if sheet/plate type
                const sheetPlateTypes = ['MS Plate', 'MS Chequered Plate', 'MS Sheet', 'MS Galvanized Sheet', 
                                         'SS Sheet 304', 'SS Sheet 316', 'SS Plate 304', 'SS Plate 316'];
                const isSheetPlate = sheetPlateTypes.includes(item.materialType);

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${item.materialType}</td>
                    <td><strong>${item.sectionSize}</strong></td>
                    <td>${item.weightPerMeter}</td>
                    <td>${item.length}</td>
                    <td>${isSheetPlate ? item.width : '-'}</td>
                    <td>${unitLabels[item.lengthUnit]}</td>
                    <td>${item.lengthInMeters}</td>
                    <td>${isSheetPlate ? item.widthInMeters : '-'}</td>
                    <td>${isSheetPlate ? item.areaInSqMeters : '-'}</td>
                    <td>${item.quantity}</td>
                    <td><strong>${item.totalWeight}</strong></td>
                    <td>${item.costPerKg || '-'}</td>
                    <td><strong>${item.totalCost > 0 ? item.totalCost : '-'}</strong></td>
                    <td>${item.notes || '-'}</td>
                `;
                tbody.appendChild(row);
            });

            tfoot.innerHTML = `
                <tr>
                    <td colspan="11" style="text-align: right;"><strong>Grand Total:</strong></td>
                    <td><strong>${grandTotalWeight.toFixed(2)} kg</strong></td>
                    <td></td>
                    <td><strong>‚Çπ ${grandTotalCost.toFixed(2)}</strong></td>
                    <td></td>
                </tr>
            `;

            document.getElementById('estimate-date').textContent = new Date().toLocaleDateString();
            document.getElementById('results-section').classList.add('active');
            
            // Scroll to results
            document.getElementById('results-section').scrollIntoView({ behavior: 'smooth' });
        }

        // Download PDF function
        function downloadPDF() {
            alert('Please use the Print button and select "Save as PDF" from your browser\'s print dialog.');
        }

        // Initialize on page load
        window.onload = init;
    </script>
</body>
</html>